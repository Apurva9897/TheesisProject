<div class="warehouse-container">
  <h2>Warehouse Zones</h2>

  <div class="zones-list">
    <div class="zone-card zone-a" (click)="fetchItemsByZone('Zone A')">
      <h3>Zone A</h3>
      <p>Small Equipments</p>
    </div>
    <div class="zone-card zone-b" (click)="fetchItemsByZone('Zone B')">
      <h3>Zone B</h3>
      <p>Expensive Products</p>
    </div>
    <div class="zone-card zone-c" (click)="fetchItemsByZone('Zone C')">
      <h3>Zone C</h3>
      <p>Big Items</p>
    </div>
    <div class="zone-card zone-d" (click)="fetchItemsByZone('Zone D')">
      <h3>Zone D</h3>
      <p>Special Conditions</p>
    </div>
  </div>

  <hr>

  <div *ngIf="selectedZone">
    <ul class="nav nav-tabs">
      <li class="nav-item">
        <a class="nav-link" [class.active]="activeTab === 'items'" (click)="activeTab = 'items'">Product Table</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" [class.active]="activeTab === 'shelves'" (click)="activeTab = 'shelves'">Shelf Table</a>
      </li>
    </ul>
  </div>

  <!-- Product Table -->
  <div *ngIf="activeTab === 'items' && selectedZone">
    <h3 class="mt-3">Items in {{ selectedZone }}</h3>
    <div *ngIf="loadingItems">Loading items...</div>
    <table *ngIf="!loadingItems && items.length > 0" class="items-table table table-bordered mt-2">
      <thead>
        <tr>
          <th>Item ID</th>
          <th>Name</th>
          <th>Category</th>
          <th>Quantity</th>
          <th>Status</th>
          <th>Shelf</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of items">
          <td>{{ item.item_id }}</td>
          <td>{{ item.name }}</td>
          <td>{{ item.category }}</td>
          <td>{{ item.quantity }}</td>
          <td>
            <span [ngClass]="{ 'text-success': item.status === 'In Stock', 'text-danger': item.status !== 'In Stock' }">
              {{ item.status }}
            </span>
          </td>
          <td>{{ item.shelf }}</td>
        </tr>
      </tbody>
    </table>
    <div *ngIf="!loadingItems && items.length === 0">
      No items found in this zone.
    </div>
  </div>

  <!-- Shelf Table -->
<div *ngIf="activeTab === 'shelves'" class="mt-4">
  <h3>Shelf Data for {{ selectedZone }}</h3>

  <table class="table table-bordered" *ngIf="shelves.length > 0">
    <thead>
      <tr>
        <th>Shelf</th>
        <th>Current Product</th>
        <th>Occupied</th>           <!-- âœ… Un-commented and restored -->
        <th>Available</th>
        <th>Capacity</th>
        <th>% Shelf Occupied</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let shelf of shelves">
        <td>{{ shelf.shelf }}</td>
        <td>{{ shelf.product }}</td>
        <td>{{ shelf.occupied }}</td> 
        <td>{{ shelf.available }}</td>
        <td>{{ shelf.capacity }}</td>
        <td>
          <span [ngClass]="getStatusColor(shelf.status)">
            {{ shelf.status }}
          </span>
        </td>
      </tr>
    </tbody>
  </table>


    <!-- Bar Chart Below Table -->
    <div class="mt-4" *ngIf="shelfChartOptions && shelfChartOptions.series">
      <apx-chart
        [series]="shelfChartOptions.series"
        [chart]="shelfChartOptions.chart"
        [xaxis]="shelfChartOptions.xaxis"
        [dataLabels]="shelfChartOptions.dataLabels"
        [title]="shelfChartOptions.title"
        [colors]="shelfChartOptions.colors || []">
      </apx-chart>
    </div>
  
    <div *ngIf="shelves.length === 0" class="alert alert-warning">
      No shelf data found for {{ selectedZone }}.
    </div>
  </div>
</div>
