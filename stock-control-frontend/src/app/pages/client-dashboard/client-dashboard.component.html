<!-- Main Dashboard Container -->
<div class="dashboard-container">

  <div class="sidebar">

    <h3>Filter by...</h3>
    <div class="filter-section">
      <label>Best Sellers:</label>
      <select [(ngModel)]="selectedBestSeller" (change)="applyFilters()">
        <option value="">All</option>
        <option value="top">Top 5 Best Sellers</option>
        <option value="low">Low Sellers</option>
      </select>
    </div>
    <div class="filter-section">
      <label>Stock Availability:</label>
      <select [(ngModel)]="selectedStock" (change)="applyFilters()">
        <option value="">All</option>
        <option value="in">In Stock</option>
        <option value="low">Low Stock</option>
        <option value="out">Out of Stock</option>
      </select>
    </div>
    
    <div class="filter-section">
      <label>Price:</label>
      <select [(ngModel)]="selectedPrice" (change)="applyFilters()">
        <option value="">All</option>
        <option value="lowtohigh">Low to High</option>
        <option value="hightolow">High to Low</option>
      </select>
    </div>
    <div class="filter-buttons">
      <button (click)="applyFilters()" class="btn btn-primary">Apply Filters</button>
      <button (click)="resetFilters()" class="btn btn-secondary" style="margin-left: 10px;">Clear Filters</button>
    </div>
  </div>
 
  <!-- Top Navigation Bar -->
<nav class="navbar">
  <div class="navbar-brand">MyShop</div>
  <div class="navbar-links">
    <!-- My Account Dropdown -->
    <div class="dropdown" (click)="toggleDropdown()" style="position: relative; cursor: pointer;">
      My Account
      <div *ngIf="dropdownOpen" style="position: absolute; background: white; color: black; top: 100%; right: 0; border: 1px solid #ccc; border-radius: 5px; width: 150px; margin-top: 5px;">
        <button (click)="goToUpdateProfile()" style="padding: 10px; cursor: pointer; width: 100%; background: none; border: none; text-align: left;">Update Profile</button>
        <button (click)="signOut()" style="padding: 10px; cursor: pointer; width: 100%; background: none; border: none; text-align: left;">Sign Out</button>
      </div>      
    </div>
  
    <!-- Total -->
    <a href="#">
      total <span class="badge bg-success">{{ total }}</span>
    </a>
  </div>
  
</nav>

   
  
  <!-- Main Content Area -->
  <div class="content">
    <!-- Dashboard View -->
    <div *ngIf="activeTab === 'dashboard'">
      <h1 class="welcome-text">Welcome, {{ customerName }}</h1>
      <h2 class="section-header">Featured Products</h2>
      <hr>

      <div class="products-grid">
        <div *ngFor="let product of filteredProducts" class="product-card">
          <div class="product-image">
            <img [src]="'assets/' + product.name.split(' ').join('') + '.png'" [alt]="product.name" />
          </div>
          <div class="product-details">
            <h3>{{ product.name }}</h3>
            <p class="product-description">{{ product.description }}</p>
            <p class="product-price">${{ product.price.toFixed(2) }}</p>

            <p class="stock-info" [ngClass]="{
              'in-stock': product.stock > 10,
              'low-stock': product.stock > 0 && product.stock <= 10,
              'out-of-stock': product.stock === 0
            }">
              {{ getStockLabel(product.stock) }}
            </p>

            <p *ngIf="orderErrors[product.id]" class="error-message">{{ orderErrors[product.id] }}</p>

            <div class="product-controls">
              <div class="quantity-selector">
                <span>Quant:</span>
                <button class="qty-btn" (click)="decrementQuantity(product.id)" [disabled]="product.stock === 0">-</button>
                <input type="text"
                       [(ngModel)]="orderQuantities[product.id]"
                       (change)="validateQuantity(product.id, product.stock)"
                       class="qty-input"
                       [disabled]="product.stock === 0">
                <button class="qty-btn"
                        (click)="incrementQuantity(product.id, product.stock)"
                        [disabled]="product.stock === 0 || orderQuantities[product.id] >= product.stock">+</button>
              </div>
              <button class="add-to-cart-btn"
                      (click)="addToCart(product.id)"
                      [disabled]="product.stock === 0 || orderErrors[product.id]">
                Add to Cart
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Other Tabs -->
    <div *ngIf="activeTab === 'place-order'">
      <h2 class="section-header">Confirm Your Order</h2>
      <p>This section will be implemented in the next phase.</p>
    </div>

    <div *ngIf="activeTab === 'order-history'">
      <h2 class="section-header">Your Order History</h2>
      <p>This section will be implemented in the next phase.</p>
    </div>

    <div *ngIf="activeTab === 'help'">
      <h2 class="section-header">Need Help?</h2>
      <p>This section will be implemented in the next phase.</p>
    </div>
  </div>
  <button class="btn btn-success confirm-order-btn" (click)="navigateToConfirmOrder()">
    Confirm Order
  </button>
</div>
