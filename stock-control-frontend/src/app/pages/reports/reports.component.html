<div class="reports-container">
    <h2>Reports</h2>
  
    <!-- Tabs -->
    <ul class="nav nav-tabs mt-3">
      <li class="nav-item">
        <a class="nav-link" [class.active]="activeTab === 'supplier'" (click)="activeTab = 'supplier'">Supplier Orders</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" [class.active]="activeTab === 'client'" (click)="activeTab = 'client'">Client Orders</a>
      </li>
    </ul>
  
    <!-- Supplier Orders Content -->
    <div *ngIf="activeTab === 'supplier'" class="supplier-orders mt-4">
      <div class="filters d-flex flex-wrap gap-3 align-items-end">
        <div>
          <label>Supplier</label>
          <select class="form-control" [(ngModel)]="filters.supplier">
            <option value="All">All Suppliers</option>
            <option *ngFor="let s of suppliers" [value]="s">{{ s }}</option>
          </select>
        </div>
        <div>
          <label>Start Date</label>
          <input type="date" class="form-control" [(ngModel)]="filters.startDate">
        </div>
        <div>
          <label>End Date</label>
          <input type="date" class="form-control" [(ngModel)]="filters.endDate">
        </div>
        <button class="btn btn-primary" (click)="fetchReports()">Generate Report</button>
        <button class="btn btn-outline-success ms-auto" (click)="exportCSV()">Export Report</button>
      </div>
  
      <table class="table table-bordered mt-4" *ngIf="supplierOrders.length > 0">
        <thead>
          <tr>
            <th>PO Number</th>
            <th>Supplier</th>
            <th>Date</th>
            <th>Products Count</th>
            <th>Total Cost</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let order of supplierOrders">
            <td>{{ order.order_id }}</td>
            <td>{{ order.supplier }}</td>
            <td>{{ order.order_date }}</td>
            <td>{{ order.products_count }}</td>
            <td>£{{ order.total_cost.toFixed(2) }}</td>
            <td><span class="badge bg-info text-dark">{{ order.status }}</span></td>
          </tr>
        </tbody>
      </table>
  
      <div *ngIf="supplierOrders.length === 0 && hasFetched" class="alert alert-warning mt-4">
        No records found for selected filters.
      </div>
    </div>
  
    <!-- Placeholder for Client Orders -->
    <div *ngIf="activeTab === 'client'" class="mt-4">
      <div class="client-orders mt-4">
        <div class="filters d-flex flex-wrap gap-3 align-items-end">
          <div>
            <label>Start Date</label>
            <input type="date" class="form-control" [(ngModel)]="clientFilters.startDate">
          </div>
          <div>
            <label>End Date</label>
            <input type="date" class="form-control" [(ngModel)]="clientFilters.endDate">
          </div>
          <button class="btn btn-primary" (click)="fetchClientReports()">Generate Report</button>
          <button class="btn btn-outline-success ms-auto" (click)="exportClientCSV()">Export Report</button>
        </div>
      
        <table class="table table-bordered mt-4" *ngIf="clientOrders.length > 0">
          <thead>
            <tr>
              <th>Order ID</th>
              <th>Customer Email</th>
              <th>Order Date</th>
              <th>Products Count</th>
              <th>Total Amount</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let order of clientOrders">
              <td>{{ order.order_id }}</td>
              <td>{{ order.customer_email }}</td>
              <td>{{ order.order_date }}</td>
              <td>{{ order.products_count }}</td>
              <td>£{{ order.total_cost.toFixed(2) }}</td>
              <td><span class="badge bg-warning text-dark">{{ order.status }}</span></td>
            </tr>
          </tbody>
        </table>
      
        <div *ngIf="clientOrders.length === 0 && clientFilters.startDate && clientFilters.endDate" class="alert alert-warning mt-4">
          No client records found for selected dates.
        </div>
      </div>
     
    </div>
  </div>
  
